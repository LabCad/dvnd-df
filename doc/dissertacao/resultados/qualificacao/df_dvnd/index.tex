\section{DVND} \label{sec:res_df_dvnd}

Uma solução inicial aleatória é enviada para os processos de busca DVND e RVND, então o valor médio da função objetivo é apresentado nas Tabelas~\ref{tab:rvndDvndN1imp},~\ref{tab:rvndDvndN2imp},~\ref{tab:rvndDvndN3imp} e~\ref{tab:rvndDvndN4imp}.
Este resultado foi obtido de um conjunto de 100 execuções, foram comparadas a versão do RVND em dataflow com o DVND em dataflow, sendo este último sujeito a seguinte parametrização: número de máquinas usadas $m \in [1, 4]$ e número de processos por máquina $w \in [1, 10]$.
O valor expresso é o fator de melhoria sobre a solução inicial $Imp$ que é definido por $\frac{Inicial}{Final}$, onde $Inicial$ é o valor para a função objetivo da solução inicial, a magnitude de \textit{Imp} indica a melhora obtida na solução por cada método respectivamente.

\input{resultados/df_dvnd/tabelasValores.tex}

De forma equivalente, as Tabelas~\ref{tab:rvndDvndN1times},~\ref{tab:rvndDvndN2times},~\ref{tab:rvndDvndN3times} e~\ref{tab:rvndDvndN4times} indicam o tempo médio de execução para o RVND e DVND (em segundos).
As colunas indicam os valores de tempo para as variações do método DVND conforme mencionado anteriormente.
Da tabela podemos ver que, para as instâncias 0 a 4 ($n \in \{52, 100, 226, 318\}$), o DVND consume um tempo computacional maior que o RVND mesmo utilizando mais máquinas e processos, contudo a partir da instancia 4 ($n=501$) o DVND supera os tempos alcançados pelo RVND, variando apenas sua qualidade conforme os parâmetros de número de máquinas ($m$) e processos($w$), o que comprova a tese levantada em~\cite{df-dvnd2018} de que melhorias na implementação poderiam alterar significativamente o desempenho do método.
%, being more expensive in all instances proportionally to the number of parallel neighborhood exploration calls (slightly more than five, as explained in subsection \ref{subsec:neighborhoods}).

Cabe ressaltar que o desempenho de uma configuração com duas máquinas ($m=2$) e dois processos ($w=2$) não é equivalente ao de uma máquina ($m=1$) e quatro processos ($w=4$), nos dois casos são 4 processos contudo no primeiro estes rodam em máquinas diferentes e se comunicam via troca de mensagens pela rede enquanto na segunda rodam na mesma máquina.
No primeiro caso estão sujeitos ao ambiente distribuído enquanto no segundo caso apesar de rodar na mesma máquina usa apenas uma placa de vídeo logo há uma concorrência pelo uso dos recursos.

\input{resultados/df_dvnd/tabelasTempos.tex}

% \input{resultados/df_dvnd/graficosTempo_n1.tex}
% \input{resultados/df_dvnd/graficosTempo_n2.tex}
% \input{resultados/df_dvnd/graficosTempo_n3.tex}
% \input{resultados/df_dvnd/graficosTempo_n4.tex}
\input{resultados/df_dvnd/graficosTempo.tex}

% \begin{landscape}
\figureTimeDvndRvnd{0}{52}

Não obstante, analisar apenas o valor médio da solução e tempo gasto no processo podem levar a conclusões precipitadas, é possível, por exemplo, que uma grande amplitude nos resultados pode estar ofuscando a real qualidade do método. Assim sendo os resultados para as 100 execuções de cada instância foram apresentados num gráfico boxplot que pode ser visto nas Figuras~\ref{fig:timeDvndRvnd_n1in0}-\ref{fig:timeDvndRvnd_n4in7}, cada uma das figuras apresenta a variação de máquinas $m$ e processos para cada uma das instâncias.

\figureTimeDvndRvnd{1}{100}

Podemos ver pela Figura~\ref{fig:timeDvndRvnd_in1} que aumentar o número de processos ($w$) não melhora o tempo de execução, havendo uma melhoria bem sutil ao aumentar o número de máquinas ($m$) utilizadas contudo em todos os casos o RVND se mostrou mais eficiente.

É esperado que o RVND detenha tempos melhores para as instâncias menores devido a não necessitar realizar operações complexas e custosas, em termos computacionais, como a troca de contexto CPU-GPU e troca de mensagens em rede para comunicação dos processos.

\figureTimeDvndRvnd{2}{226}

Para o caso da instância 2 (com $n=226$), exibido na Figura~\ref{fig:timeDvndRvnd_in1}, começamos a verificar, visualmente, uma melhora bem tênue ao passar de uma para duas e três máquinas (ver Figuras~\ref{fig:timeDvndRvnd_n1in2}, \ref{fig:timeDvndRvnd_n2in2} e \ref{fig:timeDvndRvnd_n3in2}.

\figureTimeDvndRvnd{3}{318}

A Figura~\ref{fig:timeDvndRvnd_in3} representa os resultados para a instância 3 ($n=318$) vemos o tempo do DVND bem mais próximo ao do RVND.

Corroborando os resultados destacados a respeito das Tabelas~\ref{tab:rvndDvndN1times}-\ref{tab:rvndDvndN4times} podemos ver que o RVND apresenta melhores tempos para as instâncias até o tamanho de 318 nós (instância 3).
Contudo ao observamos as Figura~\ref{fig:timeDvndRvnd_in4} vemos que o resultado se altera e o DVND passa a obter melhores tempos.
De fato vemos na Figura~\ref{fig:timeDvndRvnd_n1in4} que o DVND supera o RVND para w $\in [2,10]$ e $m=1$ quando, para os demais valores de $m$ o DVND consegue melhores tempos mas não em todos os casos.
Da Figura~\ref{fig:timeDvndRvnd_in5} em diante pode-se perceber que a amplitude de tempos encontrados pelo RVND supera muito a do DVND mostrando o impacto do seu fator de aleatoriedade na eficiência do método em encontrar as melhores soluções.

\figureTimeDvndRvnd{4}{501}

Ao analisarmos a Figura~\ref{fig:timeDvndRvnd_in4} ($n=501$) vemos que o DVND começa a apresentar tempo melhor que o RVND, principalmente para a Figura~\ref{fig:timeDvndRvnd_n1in3} ($m=1$ e boa parte de Figura~\ref{fig:timeDvndRvnd_n2in3} que representa variação do método com a configuração de duas máquinas.

\figureTimeDvndRvnd{5}{657}

Pela execução da instância 5, Figura~\ref{fig:timeDvndRvnd_in5}, percebe-se um aumento significativo na amplitude dos tempos do RVND, podemos ver também que o tempo do DVND é razoavelmente menor que os tempos do RVND, destaque para a Figura~\ref{fig:timeDvndRvnd_n1in5} ($m=1$).
Para comparar os resultados do DVND com o RVND para a instância 5 do problema é preciso usar um teste não paramétrico pois para muitos dos casos não houveram evidências para afirmar que os dados seguem uma distribuição normal, o teste de Shapiro para o DVND com $m=1$ e $w=3$ com p-valor=0,700643 é um exemplo.

\figureTimeDvndRvnd{6}{783}

A medida que o tamanho das soluções aumenta, melhora também o desempenho do DVND comparado ao RVND, como é o caso da instância 6 na Figura~\ref{fig:timeDvndRvnd_in6}, onde os tempos do RVND são razoavelmente superiores.

\figureTimeDvndRvnd{7}{1001}

Os gráficos da instância 7 (Figura~\ref{fig:timeDvndRvnd_in7} ilustram bem a melhoria nos tempos do DVND em relação ao RVND para todos os valores de $m$ e $w$.
% \end{landscape}

Conforme podemos ver pelos p-valores encontrados ao testar o tempo do RVND e DVND pelo teste de nas Tabela~\ref{tab:wilcoxRvalues_w1_10}, exceto para alguns casos, destacados em negrito, existem evidências para afirmar que há diferença significativa nas amostras de tempos do RVND e DVND para as configurações testadas, fortalecendo assim a análise levantada a respeito dos gráficos apresentados.

\input{resultados/df_dvnd/wilcoxRvalues.tex}

Conforme podemos verificar nas Figuras~\ref{fig:timeDvndRvnd_in4}, \ref{fig:timeDvndRvnd_in5}, \ref{fig:timeDvndRvnd_in6} e \ref{fig:timeDvndRvnd_in7}, aumentar o número de processos ($mw$) no DVND melhora o tempo computacional até um ponto e então começa a degradar a performance.
Alguns possíveis motivos levantados para esse problema são a concorrência por recursos pois cada máquina utiliza apenas uma placa de vĩdeo, o que se espera implementar e avaliar, conforme descrito em propostas futuras na seção \ref{subsec:usarDuasPlacasVideo}.
Também é possível que o tamanho das instâncias avaliadas não seja suficiente para proporcionar toda a demanda de computação necessária para fazer uso dos recursos disponíveis, para avaliar essa hipótese é proposto na seção \ref{subsec:instanciasMaiores} a utilização de problemas maiores mesmo que de problemas distintos.
Outro grande fator que pode estar limitando a melhoria na performance é, conforme discutido na seção \ref{subsec:metodologiaDecomposicaoVizinhancas}, o alcance do limite de paralelização horizontal para o método, demandando assim a utilização da decomposição de vizinhnças para melhorar a capacidade de paralelismo horizontal.

Embora bastante promissor, do ponto de vista de computação paralela, é muito desafiador, no contexto da otimização, lidar com instâncias com mais de $1000$ nós, isto se deve ao fato de a busca local ser apenas uma parte da meta-heurística de busca, apresentado e publicado em~\cite{jpdc2017}, que repete o processo de busca local (RVND ou DVND) milhares de vezes.

%Another point is that, like said in Subsection~\ref{subsec:neighborhoods}, the DVND enumerates much more neighborhoods than RVND.

% O valor da solução (ótimo local encontrado) não é dominado por nenhum dos métodos, pode-se ver pela Figura~\ref{fig:valueDvndRvnd} que para alguns instâncias (1, 2 e 5) DVND obteve melhores resultados mas para as outras (3 e 4) o RVND o superou.
% Sabendo disso é importante ser feita uma maior investigação sobre o impacto destes métodos no valor da solução, a Figura~\ref{fig:valueDvndRvnd_in0} mostra que o RVND obteve melhores resultados para a maioria dos testes contudo também obteve os piores resultados para instância 0.

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in0.png}}
% \caption{Valores do DVND e RVND para a instância 0}
% \label{fig:valueDvndRvnd_in0}
% \end{figure}

% Como observado na Figura~\ref{fig:valueDvndRvnd} podemos confirmar pela Figura~\ref{fig:valueDvndRvnd_in1} que o DVND obteve melhores resultados para a maior parte dos testes na instância 1.
% Um outro ponto é que o RVND obteve os piores resultados.

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in1.png}}
% \caption{Valores do DVND e RVND para a instância 1}
% \label{fig:valueDvndRvnd_in1}
% \end{figure}

% A instância 2 obteve um resultado bastante diferenciado, DVND teve um comportamento muito mais regular em termos de valor da solução com uma grande discrepância em relação aos resultados encontrados pelo RVND, conforme pode ser visto na Figura~\ref{fig:valueDvndRvnd_in2}.

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in2.png}}
% \caption{Valores do DVND e RVND para a instância 2}
% \label{fig:valueDvndRvnd_in2}
% \end{figure}

% Para a instância 3 (veja Figura~\ref{fig:valueDvndRvnd_in3}) RVND obteve melhores resultados para alguns casos e também os piores resultados, contudo em 80 dos 100 testes o DVND obteve melhores resultados.

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in3.png}}
% \caption{Valores do DVND e RVND para a instância 3}
% \label{fig:valueDvndRvnd_in3}
% \end{figure}

% Por outro lado, a Figura~\ref{fig:valueDvndRvnd_in4} indica que o RVND obteve melhores resultados para a maioria dos testes da instância 4.
% Contudo novamente o RVND obteve os melhores e também os piores resultados indicando a uma grande variabilidade na qualidade da solução encontrada.

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in4.png}}
% \caption{Valores do DVND e RVND para a instância 4}
% \label{fig:valueDvndRvnd_in4}
% \end{figure}

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in5.png}}
% \caption{Valores do DVND e RVND para a instância 5}
% \label{fig:valueDvndRvnd_in5}
% \end{figure}

% Instâncias 5 e 6 (Figura~\ref{fig:valueDvndRvnd_in5}, Figura~\ref{fig:valueDvndRvnd_in6}) obtiveram resultados semelhantes, a última destas manteve uma pequena variação no valor da solução encontrada.

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in6.png}}
% \caption{Valores do DVND e RVND para a instância 6}
% \label{fig:valueDvndRvnd_in6}
% \end{figure}

% A instância 7 tem um comportamento bastante similar ao da instância 4, veja Figura~\ref{fig:valueDvndRvnd_in7} e Figura~\ref{fig:valueDvndRvnd_in4}, o RVND obteve os melhores resultados para alguns testes mas também encontrou os piores valores.

% \begin{figure}[htbp]
% \centerline{\includegraphics[scale=0.425]{figuras/dvnd/valueDvndRvnd_in7.png}}
% \caption{Valores do DVND e RVND para a instância 7}
% \label{fig:valueDvndRvnd_in7}
% \end{figure}

% Para todas as instâncias os piores resultados das amostragens foram encontrados pelo RVND e este também apresentou uma amplitude maior no valor das soluções, o que pode indicar um forte fator de aleatoriedade na qualidade da solução.
% Desta forma, o objetivo de ter um método de busca local mais profundo e, ao mesmo tempo, mais estável pôde ser alcançado pelo DVND.
% Um outro objetivo era de buscar um algoritmo mais escalável, que pudesse explorar múltiplos nós de processamento simultaneamente, com o objetivo de aproveitar melhor os recursos disponíveis.
